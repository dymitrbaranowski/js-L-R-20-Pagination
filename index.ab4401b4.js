var target=document.querySelector(".js-guard"),BASE_URL="https://api.themoviedb.org/3/",ENDPOINT="trending/movie/day",API_KEY="345007f9ab440e5b86cef51be6397df1",list=document.querySelector(".js-list"),currentPage=1,options={root:null,rootMargin:"200px",threshold:1},observer=new IntersectionObserver(onLoad,options);function onLoad(e,t){e.forEach((function(e){e.isIntersecting&&getTrending(currentPage+=1).then((function(e){console.log(e),list.insertAdjacentHTML("beforeend",createMarkup(e.results)),e.page===e.total_pages&&t.unobserve(target)})).catch((function(e){return console.log(e)}))}))}function createMarkup(e){return e.map((function(e){var t=e.poster_path,n=e.title;return'<li>\n    <img src="https://image.tmdb.org/t/p/w400'.concat(t,'" alt="').concat(n,'">\n    <h2>').concat(n,"</h2>\n</li>")})).join("")}function getTrending(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return fetch("".concat(BASE_URL).concat(ENDPOINT,"?api_key=").concat(API_KEY,"&page=").concat(e)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}getTrending().then((function(e){console.log(e),list.insertAdjacentHTML("beforeend",createMarkup(e.results)),observer.observe(target)})).catch((function(e){return console.log(e)}));
//# sourceMappingURL=index.ab4401b4.js.map
